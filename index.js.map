{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const pageLimit = 15;\nconst GET_URL = 'https://pixabay.com/api/';\nconst API_KEY = '49472978-10c322c2b56102295a27a1e47';\n\nexport async function makeSearch(searchWords, page = 1) {\n    return await axios.get(`${GET_URL}`, {\n        params: {\n            key: API_KEY,\n            q: searchWords,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: pageLimit,\n            page,\n        }\n    })\n};","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\n\nexport const loadBttn = {\n    bttn: document.querySelector('button[name=\"load-more\"]'),\n    hideBttn() {\n    loadBttn.bttn.classList.add(\"visually-hidden\");\n    },\n    showBttn() {\n    loadBttn.bttn.classList.remove(\"visually-hidden\");\n    }\n};\n\nexport function createMarkup(hits) {\n    const markUp = hits.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n    `<li class=\"gallery_item\">\n    <a class=\"gallery_img_link\" href=\"${largeImageURL}\">\n    <img class=\"gallery_img\"\n        src=\"${webformatURL}\" \n        alt=\"${tags}\" \n        width=\"360\" \n        height=\"200\" /></a>\n    <div class=\"gallery_item_box\">\n        <ul class=\"gallery_item_list\">\n        <li>\n            <p>Likes</p>\n            ${likes}\n        </li>\n        <li>\n            <p>Views</p>\n            ${views}\n        </li>\n        <li>\n            <p>Comments</p>\n            ${comments}\n        </li>\n        <li>\n            <p>Downloads</p>\n            ${downloads}\n        </li>\n        </ul>\n    </div>\n    </li>\n    `).join(\"\");\n\ngallery.insertAdjacentHTML('beforeend', markUp);\nmodal.refresh();\n};\n\nconst modal = new SimpleLightbox('.gallery a', {\n    captionsData: \"alt\",\n    captionDelay: 150,\n});\n\nexport function clearGallery() {\n    gallery.innerHTML = '';\n};\n\nexport function toggleLoader() {\n    loader.classList.toggle(\"visually-hidden\");\n}","import { makeSearch, pageLimit } from \"./js/pixabay-api\";\nimport { createMarkup, clearGallery, toggleLoader, loadBttn } from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector('.form');\nlet page;\nlet search = '';\n\nform.addEventListener('submit', searchSubmit);\nloadBttn.bttn.addEventListener('click', loadMore);\n\niziToast.settings({\n    messageColor: '#fafafb',\n    titleColor: '#fafafb',\n    backgroundColor: '#ef4040',\n    iconUrl: iconError,\n    closeOnEscape: true,\n    closeOnClick: true,\n    position: 'bottomCenter',\n});\n\nasync function searchSubmit(evt) {\n    evt.preventDefault();\n    page = 1;\n    loadBttn.hideBttn();\n\n    const searchInput = evt.target.elements['search-text'];\n    search = searchInput.value.trim();\n\n    if (!search) {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please, enter a valid image name!',\n        });\n        return;\n    }\n\n    clearGallery();\n    toggleLoader();\n\n    try {\n        const resp = await makeSearch(search, page); \n        if (resp.data.total === 0) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching<br>your search query. Please try again!',\n            });\n            return;\n        }\n        createMarkup(resp.data.hits);\n        resp.data.totalHits < pageLimit ? loadBttn.hideBttn() : loadBttn.showBttn();\n        page += 1;\n    } catch (error) {\n        iziToast.error({\n            title: \"Oh no!\",\n            message: `${error.message}`,\n        });\n    } finally {\n        toggleLoader();\n    }\n    form.reset();\n}\n\nasync function loadMore() {\n    toggleLoader();\n\n    try {\n        const resp = await makeSearch(search, page);\n        createMarkup(resp.data.hits);\n        page += 1;\n\n        window.scrollBy({\n            top: window.innerHeight * 2,\n            behavior: 'smooth'\n        });\n\n        const totalPages = Math.ceil(resp.data.totalHits / pageLimit);\n        if (page > totalPages) {\n            loadBttn.hideBttn();\n            iziToast.info({\n                message: `We're sorry, but you've reached the end of search results.`,\n                backgroundColor: '#09',\n                icon: iconInfo,\n            });\n        }\n    } catch (error) {\n        iziToast.error({\n            title: \"Oh no!\",\n            message: `${error.message}`,\n        });\n    } finally {\n        toggleLoader();\n    }\n}"],"names":["pageLimit","GET_URL","API_KEY","makeSearch","searchWords","page","axios","gallery","loader","loadBttn","createMarkup","hits","markUp","webformatURL","largeImageURL","tags","likes","views","comments","downloads","modal","SimpleLightbox","clearGallery","toggleLoader","form","search","searchSubmit","loadMore","iziToast","evt","resp","error","totalPages"],"mappings":"+vBAEO,MAAMA,EAAY,GACnBC,EAAU,2BACVC,EAAU,qCAET,eAAeC,EAAWC,EAAaC,EAAO,EAAG,CACpD,OAAO,MAAMC,EAAM,IAAI,GAAGL,CAAO,GAAI,CACjC,OAAQ,CACJ,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUJ,EACV,KAAAK,CACH,CACT,CAAK,CACL,CCfA,MAAME,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAElCC,EAAW,CACpB,KAAM,SAAS,cAAc,0BAA0B,EACvD,UAAW,CACXA,EAAS,KAAK,UAAU,IAAI,iBAAiB,CAC5C,EACD,UAAW,CACXA,EAAS,KAAK,UAAU,OAAO,iBAAiB,CAC/C,CACL,EAEO,SAASC,EAAaC,EAAM,CAC/B,MAAMC,EAASD,EAAK,IAAI,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IACjG;AAAA,wCACoCL,CAAa;AAAA;AAAA,eAEtCD,CAAY;AAAA,eACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAOLC,CAAK;AAAA;AAAA;AAAA;AAAA,cAILC,CAAK;AAAA;AAAA;AAAA;AAAA,cAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,cAIRC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,KAKlB,EAAE,KAAK,EAAE,EAEdZ,EAAQ,mBAAmB,YAAaK,CAAM,EAC9CQ,EAAM,QAAO,CACb,CAEA,MAAMA,EAAQ,IAAIC,EAAe,aAAc,CAC3C,aAAc,MACd,aAAc,GAClB,CAAC,EAEM,SAASC,GAAe,CAC3Bf,EAAQ,UAAY,EACxB,CAEO,SAASgB,GAAe,CAC3Bf,EAAO,UAAU,OAAO,iBAAiB,CAC7C,CC1DA,MAAMgB,EAAO,SAAS,cAAc,OAAO,EAC3C,IAAInB,EACAoB,EAAS,GAEbD,EAAK,iBAAiB,SAAUE,CAAY,EAC5CjB,EAAS,KAAK,iBAAiB,QAASkB,CAAQ,EAEhDC,EAAS,SAAS,CACd,aAAc,UACd,WAAY,UACZ,gBAAiB,UACjB,QAAS,UACT,cAAe,GACf,aAAc,GACd,SAAU,cACd,CAAC,EAED,eAAeF,EAAaG,EAAK,CAQ7B,GAPAA,EAAI,eAAc,EAClBxB,EAAO,EACPI,EAAS,SAAQ,EAGjBgB,EADoBI,EAAI,OAAO,SAAS,aAAa,EAChC,MAAM,OAEvB,CAACJ,EAAQ,CACTG,EAAS,MAAM,CACX,MAAO,QACP,QAAS,mCACrB,CAAS,EACD,MACH,CAEDN,IACAC,IAEA,GAAI,CACA,MAAMO,EAAO,MAAM3B,EAAWsB,EAAQpB,CAAI,EAC1C,GAAIyB,EAAK,KAAK,QAAU,EAAG,CACvBF,EAAS,MAAM,CACX,QAAS,6EACzB,CAAa,EACD,MACH,CACDlB,EAAaoB,EAAK,KAAK,IAAI,EAC3BA,EAAK,KAAK,UAAY9B,EAAYS,EAAS,SAAU,EAAGA,EAAS,WACjEJ,GAAQ,CACX,OAAQ0B,EAAO,CACZH,EAAS,MAAM,CACX,MAAO,SACP,QAAS,GAAGG,EAAM,OAAO,EACrC,CAAS,CACT,QAAc,CACNR,GACH,CACDC,EAAK,MAAK,CACd,CAEA,eAAeG,GAAW,CACtBJ,IAEA,GAAI,CACA,MAAMO,EAAO,MAAM3B,EAAWsB,EAAQpB,CAAI,EAC1CK,EAAaoB,EAAK,KAAK,IAAI,EAC3BzB,GAAQ,EAER,OAAO,SAAS,CACZ,IAAK,OAAO,YAAc,EAC1B,SAAU,QACtB,CAAS,EAED,MAAM2B,EAAa,KAAK,KAAKF,EAAK,KAAK,UAAY9B,CAAS,EACxDK,EAAO2B,IACPvB,EAAS,SAAQ,EACjBmB,EAAS,KAAK,CACV,QAAS,6DACT,gBAAiB,MACjB,KAAM,QACtB,CAAa,EAER,OAAQG,EAAO,CACZH,EAAS,MAAM,CACX,MAAO,SACP,QAAS,GAAGG,EAAM,OAAO,EACrC,CAAS,CACT,QAAc,CACNR,GACH,CACL"}